<!DOCTYPE html>
<html lang="en">
  <head>
  <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
  <title>xlagauchex</title>
  <style>
    body {
            background-color: #000000;
            margin: 0px;
            overflow: hidden;
    }
  </style>
</head>
<body>

<script src="js/three.minR88.js"></script>
<script src="js/webmidi2r10/webmidi.js"></script>
<script src="js/webmidiSetup.js"></script>
<script src="js/osc-browser.js"></script>
<script src="js/OrbitControls.js"></script>

<script>

"use strict";

var camera, scene, renderer, controls;
var geometry, material, mesh;
var cc1 = 0;
// Tidal sends on 57120
var oscPort = new osc.WebSocketPort({
    url: "ws://localhost:57120", // URL to your Web Socket server.
    metadata: true
});

oscPort.open();

oscPort.on("message", function (oscMsg) {
    console.log("An OSC message just arrived!", oscMsg);
});

init();
animate();

function init( ) {

	camera = new THREE.PerspectiveCamera( 70, window.innerWidth / window.innerHeight, 0.01, 10 );
	camera.position.z = 1;

	scene = new THREE.Scene();

	geometry = new THREE.BoxGeometry( 0.5, 0.5, 0.5 );
	material = new THREE.MeshNormalMaterial();

	mesh = new THREE.Mesh( geometry, material );
	scene.add( mesh );

	renderer = new THREE.WebGLRenderer( { antialias: true } );
	renderer.setSize( window.innerWidth, window.innerHeight );
	document.body.appendChild( renderer.domElement );
  controls = new THREE.OrbitControls( camera, renderer.domElement );
  controls.enablePan = false;
  controls.enableKeys = true;
  controls.maxDistance = 70;
  controls.minDistance = 0.3;

}

function animate( ) {

	requestAnimationFrame( animate );
	render( );
}

function render( ) {

	var time = Date.now() * 0.0001;

	mesh.rotation.x = cc1 * 0.0009;
  mesh.rotation.y = cc1 * 0.005;

//   if (!cc1 == 0){
//   mesh.scale.set( cc1 * 0.01, cc1 * 0.02, cc1 * 0.09 );
// }



// 	mesh.rotation.x += Math.sin( time * 0.5 ) * 1;
// 	mesh.rotation.y = Math.sin( time * 1 ) * 1;

	renderer.render( scene, camera );

}

      </script>
  </body>
</html>
